# MSA의 이해

마이크로소프트 아키텍쳐의 줄임말로 기존 하나로 통합되어있던 어플리케이션을 여러개로 쪼개어져서 어플리케이션의 하나의 기능들이 하나의 어플리케이션이 되도록 구현된 것을 뜻합니다.

기존은 모놀리스(monolith)라고 표현하며 모든 서비스, 로직이 서버 하나에 다 들어가 있었습니다.

마이크로 서비스는 서비스 로직마다 각각의 서버가 존재하게 됩니다.

예를 들어 기존의 어플리케이션은 User, Post, Sopping이 하나의 서버에 존재했습니다.  
서버에 문제가 생겼을 때 모든 기능을 사용할 수 없게 되었습니다. 마이크로 서비스는 User서비스로직과 서버, Post서비스로직과 서버, Sopping서비스로직과 서버 각각의 어플리케이션으로 존재하게 됩니다. 만약 Shopping 서버가 문제가 생겼을 때 Shopping 은 이용할 수 없지만 User, Post는 이용할 수 있게 됩니다.

## 마이크로서비스의 특징

각 서비스마다 데이터베이스는 하나만 사용해야 합니다. 다른 서비스와 독립적이어야합니다.  
기존 모놀리스 방식의 경우 데이터베이스가 같다보니 Join으로 다른 테이블의 데이터를 쉽게 가져올 수 있었습니다. 그러나 마이크로서비스는 '다른 데이터베이스'이므로 서비스간 어떻게 데이터를 주고받을지 결정해야 합니다.

## 데이터베이스 간의 소통

- Sync : 필요한 데이터를 제공해주는 서비스에 직접 요청을 보내서 필요한 데이터를 받아오는 방식입니다. 이해하기 쉽고 추가적인 디비를 확보하지 않아도 되지만, 다른 서비스들과 의존성이 생기게 됩니다.
- async : 비동기의 경우 서비스들을 독립적으로 두고 이벤트 버스를 하나 구축해서 모든 요청이 이벤트 버스를 향하게 합니다. 이벤트 버스는 요청을 전달합니다. 이 경우에는 의존성이 생기지 않고 다른 서비스에 요청을 보낼 필요가 없어서 속도가 더 빠르나, 이벤트 버스를 적용하기가 어렵다고 합니다.

[참고]  
hoon
